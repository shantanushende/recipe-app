{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shantanushende/Desktop/r-app-git/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/shantanushende/Desktop/r-app-git/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/shantanushende/Desktop/r-app-git/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import{useHistory}from\"react-router-dom\";import UserContext from\"../context/UserContext\";import{firestore}from\"../firebase\";var Recipe=function Recipe(props){var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),recipe=_useState2[0],setRecipe=_useState2[1];var user=useContext(UserContext);var history=useHistory();var deleteRecipe=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return firestore.collection(\"users\").doc(user.uid).collection(\"recipes\").doc(props.match.params.id).delete();case 2:history.push(\"/\");case 3:case\"end\":return _context.stop();}}},_callee);}));return function deleteRecipe(){return _ref.apply(this,arguments);};}();useEffect(function(){var getRecipe=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var recipeDoc;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return firestore.collection(\"users\").doc(user.uid).collection(\"recipes\").doc(props.match.params.id).get();case 2:recipeDoc=_context2.sent;setRecipe(recipeDoc);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getRecipe(){return _ref2.apply(this,arguments);};}();getRecipe();},[user,props.match.params.id]);var renderIngredients=function renderIngredients(){var recipeData=recipe.data();return recipeData.ingredients.map(function(ingredient,i){return/*#__PURE__*/React.createElement(\"li\",{key:i},ingredient);});};var renderRecipe=function renderRecipe(){var recipeData=recipe.data();console.log(recipeData.description);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h2\",null,recipeData.name),/*#__PURE__*/React.createElement(\"ul\",null,renderIngredients()),/*#__PURE__*/React.createElement(\"pre\",null,/*#__PURE__*/React.createElement(\"p\",null,recipeData.description)));};return/*#__PURE__*/React.createElement(\"div\",{className:\"recipe\"},recipe&&renderRecipe(),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return history.push(\"/edit/\".concat(props.match.params.id));}},\"Edit\"),/*#__PURE__*/React.createElement(\"button\",{onClick:deleteRecipe},\"Delete\"));};export default Recipe;","map":{"version":3,"sources":["/Users/shantanushende/Desktop/r-app-git/recipe-app/src/recipe/Recipe.js"],"names":["React","useContext","useEffect","useState","useHistory","UserContext","firestore","Recipe","props","undefined","recipe","setRecipe","user","history","deleteRecipe","collection","doc","uid","match","params","id","delete","push","getRecipe","get","recipeDoc","renderIngredients","recipeData","data","ingredients","map","ingredient","i","renderRecipe","console","log","description","name"],"mappings":"wfAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,QAAvC,KAAuD,OAAvD,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,CACA,OAASC,SAAT,KAA0B,aAA1B,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,KAAD,CAAW,eACIL,QAAQ,CAACM,SAAD,CADZ,wCACjBC,MADiB,eACTC,SADS,eAGxB,GAAMC,CAAAA,IAAI,CAAGX,UAAU,CAACI,WAAD,CAAvB,CAEA,GAAMQ,CAAAA,OAAO,CAAGT,UAAU,EAA1B,CAEA,GAAMU,CAAAA,YAAY,0FAAG,yJACbR,CAAAA,SAAS,CACZS,UADG,CACQ,OADR,EAEHC,GAFG,CAECJ,IAAI,CAACK,GAFN,EAGHF,UAHG,CAGQ,SAHR,EAIHC,GAJG,CAICR,KAAK,CAACU,KAAN,CAAYC,MAAZ,CAAmBC,EAJpB,EAKHC,MALG,EADa,QAOnBR,OAAO,CAACS,IAAR,CAAa,GAAb,EAPmB,sDAAH,kBAAZR,CAAAA,YAAY,0CAAlB,CAUAZ,SAAS,CAAC,UAAM,CACd,GAAMqB,CAAAA,SAAS,2FAAG,6KACQjB,CAAAA,SAAS,CAC9BS,UADqB,CACV,OADU,EAErBC,GAFqB,CAEjBJ,IAAI,CAACK,GAFY,EAGrBF,UAHqB,CAGV,SAHU,EAIrBC,GAJqB,CAIjBR,KAAK,CAACU,KAAN,CAAYC,MAAZ,CAAmBC,EAJF,EAKrBI,GALqB,EADR,QACVC,SADU,gBAQhBd,SAAS,CAACc,SAAD,CAAT,CARgB,wDAAH,kBAATF,CAAAA,SAAS,2CAAf,CAUAA,SAAS,GACV,CAZQ,CAYN,CAACX,IAAD,CAAOJ,KAAK,CAACU,KAAN,CAAYC,MAAZ,CAAmBC,EAA1B,CAZM,CAAT,CAcA,GAAMM,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC9B,GAAMC,CAAAA,UAAU,CAAGjB,MAAM,CAACkB,IAAP,EAAnB,CACA,MAAOD,CAAAA,UAAU,CAACE,WAAX,CAAuBC,GAAvB,CAA2B,SAACC,UAAD,CAAaC,CAAb,CAAmB,CACnD,mBAAO,0BAAI,GAAG,CAAEA,CAAT,EAAaD,UAAb,CAAP,CACD,CAFM,CAAP,CAGD,CALD,CAOA,GAAME,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAMN,CAAAA,UAAU,CAAGjB,MAAM,CAACkB,IAAP,EAAnB,CACAM,OAAO,CAACC,GAAR,CAAYR,UAAU,CAACS,WAAvB,EACA,mBACE,qDACE,8BAAKT,UAAU,CAACU,IAAhB,CADF,cAEE,8BAAKX,iBAAiB,EAAtB,CAFF,cAGE,4CACE,6BAAIC,UAAU,CAACS,WAAf,CADF,CAHF,CADF,CASD,CAZD,CAcA,mBACE,2BAAK,SAAS,CAAC,QAAf,EACG1B,MAAM,EAAIuB,YAAY,EADzB,cAEE,8BAAQ,OAAO,CAAE,yBAAMpB,CAAAA,OAAO,CAACS,IAAR,iBAAsBd,KAAK,CAACU,KAAN,CAAYC,MAAZ,CAAmBC,EAAzC,EAAN,EAAjB,SAFF,cAKE,8BAAQ,OAAO,CAAEN,YAAjB,WALF,CADF,CASD,CA7DD,CA+DA,cAAeP,CAAAA,MAAf","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport UserContext from \"../context/UserContext\";\nimport { firestore } from \"../firebase\";\n\nconst Recipe = (props) => {\n  const [recipe, setRecipe] = useState(undefined);\n\n  const user = useContext(UserContext);\n\n  const history = useHistory();\n\n  const deleteRecipe = async () => {\n    await firestore\n      .collection(\"users\")\n      .doc(user.uid)\n      .collection(\"recipes\")\n      .doc(props.match.params.id)\n      .delete();\n    history.push(\"/\");\n  };\n\n  useEffect(() => {\n    const getRecipe = async () => {\n      const recipeDoc = await firestore\n        .collection(\"users\")\n        .doc(user.uid)\n        .collection(\"recipes\")\n        .doc(props.match.params.id)\n        .get();\n\n      setRecipe(recipeDoc);\n    };\n    getRecipe();\n  }, [user, props.match.params.id]);\n\n  const renderIngredients = () => {\n    const recipeData = recipe.data();\n    return recipeData.ingredients.map((ingredient, i) => {\n      return <li key={i}>{ingredient}</li>;\n    });\n  };\n\n  const renderRecipe = () => {\n    const recipeData = recipe.data();\n    console.log(recipeData.description);\n    return (\n      <>\n        <h2>{recipeData.name}</h2>\n        <ul>{renderIngredients()}</ul>\n        <pre>\n          <p>{recipeData.description}</p>\n        </pre>\n      </>\n    );\n  };\n\n  return (\n    <div className=\"recipe\">\n      {recipe && renderRecipe()}\n      <button onClick={() => history.push(`/edit/${props.match.params.id}`)}>\n        Edit\n      </button>\n      <button onClick={deleteRecipe}>Delete</button>\n    </div>\n  );\n};\n\nexport default Recipe;\n"]},"metadata":{},"sourceType":"module"}