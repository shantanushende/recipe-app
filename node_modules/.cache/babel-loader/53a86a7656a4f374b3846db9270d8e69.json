{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shantanushende/Desktop/r-app-git/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/shantanushende/Desktop/r-app-git/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/shantanushende/Desktop/r-app-git/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import{useHistory}from\"react-router-dom\";import UserContext from\"../context/UserContext\";import{firestore}from\"../firebase\";var EditRecipe=function EditRecipe(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),ingredients=_useState4[0],setIngredients=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var user=useContext(UserContext);var history=useHistory();useEffect(function(){var getRecipe=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var recipeDoc,recipeData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return firestore.collection(\"users\").doc(user.uid).collection(\"recipes\").doc(props.match.params.id).get();case 2:recipeDoc=_context.sent;recipeData=recipeDoc.data();setName(recipeData.name);setIngredients(recipeData.ingredients.toString());setDescription(recipeData.description);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getRecipe(){return _ref.apply(this,arguments);};}();getRecipe();},[user,props.match.params.id]);var saveRecipe=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var ingredientsArray;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();ingredientsArray=ingredients.split(\",\");_context2.next=4;return firestore.collection(\"users\").doc(user.uid).collection(\"recipes\").doc(props.match.params.id).set({name:name,ingredients:ingredientsArray,description:description});case 4:history.push(\"/recipe/\".concat(props.match.params.id));case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function saveRecipe(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"edit-recipe\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Edit recipe\"),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Ingredients separated by comma\",value:ingredients,onChange:function onChange(e){return setIngredients(e.target.value);}}),/*#__PURE__*/React.createElement(\"textarea\",{placeholder:\"Description\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}}),/*#__PURE__*/React.createElement(\"button\",{onClick:saveRecipe},\"Save recipe\")));};export default EditRecipe;","map":{"version":3,"sources":["/Users/shantanushende/Desktop/r-app-git/recipe-app/src/recipe/EditRecipe.js"],"names":["React","useContext","useEffect","useState","useHistory","UserContext","firestore","EditRecipe","props","name","setName","ingredients","setIngredients","description","setDescription","user","history","getRecipe","collection","doc","uid","match","params","id","get","recipeDoc","recipeData","data","toString","saveRecipe","e","preventDefault","ingredientsArray","split","set","push","target","value"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport UserContext from \"../context/UserContext\";\nimport { firestore } from \"../firebase\";\n\nconst EditRecipe = (props) => {\n  const [name, setName] = useState(\"\");\n  const [ingredients, setIngredients] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n\n  const user = useContext(UserContext);\n\n  const history = useHistory();\n\n  useEffect(() => {\n    const getRecipe = async () => {\n      const recipeDoc = await firestore\n        .collection(\"users\")\n        .doc(user.uid)\n        .collection(\"recipes\")\n        .doc(props.match.params.id)\n        .get();\n      const recipeData = recipeDoc.data();\n      setName(recipeData.name);\n      setIngredients(recipeData.ingredients.toString());\n      setDescription(recipeData.description);\n    };\n    getRecipe();\n  }, [user, props.match.params.id]);\n\n  const saveRecipe = async (e) => {\n    e.preventDefault();\n\n    const ingredientsArray = ingredients.split(\",\");\n\n    await firestore\n      .collection(\"users\")\n      .doc(user.uid)\n      .collection(\"recipes\")\n      .doc(props.match.params.id)\n      .set({\n        name,\n        ingredients: ingredientsArray,\n        description,\n      });\n\n    history.push(`/recipe/${props.match.params.id}`);\n  };\n\n  return (\n    <div className=\"edit-recipe\">\n      <h1>Edit recipe</h1>\n      <form>\n        <input\n          type=\"text\"\n          placeholder=\"name\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"Ingredients separated by comma\"\n          value={ingredients}\n          onChange={(e) => setIngredients(e.target.value)}\n        />\n        <textarea\n          placeholder=\"Description\"\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n        />\n        <button onClick={saveRecipe}>Save recipe</button>\n      </form>\n    </div>\n  );\n};\n\nexport default EditRecipe;\n"]},"metadata":{},"sourceType":"module"}