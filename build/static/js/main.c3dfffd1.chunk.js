(this["webpackJsonprecipe-app-1-hour-challenge"]=this["webpackJsonprecipe-app-1-hour-challenge"]||[]).push([[0],{36:function(e,t,a){e.exports=a(57)},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),u=a.n(c),i=a(8),o=a(2),l=a.n(o),s=a(7),p=(a(26),a(18)),m=a.n(p);a(31);m.a.initializeApp({apiKey:"AIzaSyDaK4S9vLqQGXoWTCF2iJGI-EHrHNCki8c",authDomain:"r-app-3767a.firebaseapp.com",projectId:"r-app-3767a",storageBucket:"r-app-3767a.appspot.com",messagingSenderId:"662161729717",appId:"1:662161729717:web:f470b53d8ed1ee7c6fb6fc"});var d=m.a.auth(),f=m.a.firestore(),h=function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.signInWithPopup(new m.a.auth.GoogleAuthProvider);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=Object(n.createContext)(),v=function(e){var t=Object(n.useState)(void 0),a=Object(i.a)(t,2),c=a[0],u=a[1];return Object(n.useEffect)((function(){d.onAuthStateChanged((function(e){u(e)}))}),[]),r.a.createElement(b.Provider,{value:c},e.children)},E=b,g=a(12),j=a(4),O=function(){var e=Object(j.f)(),t=function(){var t=Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:e.push("/");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"auth-home"},r.a.createElement("button",{onClick:t},"Sign in with Google"))},w=a(24),x=a.n(w),y=(a(31),a(53),a(54),a(35)),C=(a(55),x.a.firestore());function k(e){var t=e.message,a=t.text,n=t.uid,c=t.photoURL,u=n===d.currentUser.uid?"sent":"received";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"message ".concat(u)},r.a.createElement("img",{src:c||"https://api.adorable.io/avatars/23/abott@adorable.png"}),r.a.createElement("p",null,a)))}var S=function(){var e=Object(n.useRef)(),t=C.collection("messages"),a=t.orderBy("createdAt").limit(25),c=Object(y.a)(a,{idField:"id"}),u=Object(i.a)(c,1)[0],o=Object(n.useState)(""),p=Object(i.a)(o,2),m=p[0],f=p[1],h=function(){var a=Object(s.a)(l.a.mark((function a(n){var r,c,u;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r=d.currentUser,c=r.uid,u=r.photoURL,a.next=4,t.add({text:m,createdAt:x.a.firestore.FieldValue.serverTimestamp(),uid:c,photoURL:u});case 4:f(""),e.current.scrollIntoView({behavior:"smooth"});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",null,u&&u.map((function(e){return r.a.createElement(k,{key:e.id,message:e})})),r.a.createElement("span",{ref:e})),r.a.createElement("form",{onSubmit:h},r.a.createElement("input",{value:m,onChange:function(e){return f(e.target.value)},placeholder:"say something nice"}),r.a.createElement("button",{type:"submit",disabled:!m},"\ud83d\udd4a\ufe0f")))},N=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],u=a[1],o=Object(n.useState)(""),p=Object(i.a)(o,2),m=p[0],d=p[1],h=Object(n.useState)(""),b=Object(i.a)(h,2),v=b[0],g=b[1],O=Object(n.useContext)(E),w=Object(j.f)();Object(n.useEffect)((function(){(function(){var t=Object(s.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.collection("users").doc(O.uid).collection("recipes").doc(e.match.params.id).get();case 2:a=t.sent,n=a.data(),u(n.name),d(n.ingredients.toString()),g(n.description);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[O,e.match.params.id]);var x=function(){var t=Object(s.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=m.split(","),t.next=4,f.collection("users").doc(O.uid).collection("recipes").doc(e.match.params.id).set({name:c,ingredients:n,description:v});case 4:w.push("/recipe/".concat(e.match.params.id));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"edit-recipe"},r.a.createElement("h1",null,"Edit recipe"),r.a.createElement("form",null,r.a.createElement("input",{type:"text",placeholder:"name",value:c,onChange:function(e){return u(e.target.value)}}),r.a.createElement("input",{type:"text",placeholder:"Ingredients separated by comma",value:m,onChange:function(e){return d(e.target.value)}}),r.a.createElement("textarea",{placeholder:"Description",value:v,onChange:function(e){return g(e.target.value)}}),r.a.createElement("button",{onClick:x},"Save recipe")))},I=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)(""),o=Object(i.a)(u,2),p=o[0],m=o[1],d=Object(n.useState)(""),h=Object(i.a)(d,2),b=h[0],v=h[1],g=Object(n.useContext)(E),j=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=p.split(","),e.next=4,f.collection("users").doc(g.uid).collection("recipes").add({name:a,ingredients:n,description:b});case 4:c(""),m(""),v("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"new-recipe"},r.a.createElement("h1",null,"New recipe"),r.a.createElement("form",null,r.a.createElement("input",{type:"text",placeholder:"name",value:a,onChange:function(e){return c(e.target.value)}})," ",r.a.createElement("input",{type:"text",placeholder:"Ingredients separated by comma",value:p,onChange:function(e){return m(e.target.value)}}),r.a.createElement("textarea",{placeholder:"Description",value:b,onChange:function(e){return v(e.target.value)}}),r.a.createElement("button",{onClick:j},"Save recipe")))},A=function(e){var t=Object(n.useState)(void 0),a=Object(i.a)(t,2),c=a[0],u=a[1],o=Object(n.useContext)(E),p=Object(j.f)(),m=function(){var t=Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.collection("users").doc(o.uid).collection("recipes").doc(e.match.params.id).delete();case 2:p.push("/");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){(function(){var t=Object(s.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.collection("users").doc(o.uid).collection("recipes").doc(e.match.params.id).get();case 2:a=t.sent,u(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[o,e.match.params.id]);return r.a.createElement("div",{className:"recipe"},c&&function(){var e=c.data();return console.log(e.description),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,e.name),r.a.createElement("ul",null,c.data().ingredients.map((function(e,t){return r.a.createElement("li",{key:t},e)}))),r.a.createElement("pre",null,r.a.createElement("p",null,e.description)))}(),r.a.createElement("button",{onClick:function(){return p.push("/edit/".concat(e.match.params.id))}},"Edit"),r.a.createElement("button",{onClick:m},"Delete"))},D=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],u=Object(n.useContext)(E);Object(n.useEffect)((function(){(function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.collection("users").doc(u.uid).collection("recipes").get();case 2:t=e.sent,c(t.docs);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[u]);return r.a.createElement("div",{className:"recipe-list"},r.a.createElement("h1",null,"Recipes"),r.a.createElement("ul",null,a.map((function(e,t){var a=e.data();return r.a.createElement("li",{key:t},r.a.createElement(g.b,{to:"/recipe/".concat(e.id)},a.name))}))))},F=function(){var e=Object(j.f)(),t=function(){var t=Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.signOut();case 2:e.push("/");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"w3-bar"},r.a.createElement(g.b,{to:"/",className:"w3-bar-item w3-button"},"All Recipies"),r.a.createElement(g.b,{to:"/new",className:"w3-bar-item w3-button"},"Add new recipe"),r.a.createElement(g.b,{to:"/ChatRoom",className:"w3-bar-item w3-button"},"Chatroom"),r.a.createElement("button",{onClick:t},r.a.createElement("a",{href:"#",class:"w3-bar-item w3-button"},"Signout")))},R=function(){var e=Object(n.useContext)(E);return r.a.createElement(g.a,null,r.a.createElement(j.c,null,e?r.a.createElement(r.a.Fragment,null,r.a.createElement(F,null),r.a.createElement(j.a,{exact:!0,path:"/"},r.a.createElement(D,null)),r.a.createElement(j.a,{path:"/new"},r.a.createElement(I,null)),r.a.createElement(j.a,{path:"/ChatRoom"},r.a.createElement(S,null)),r.a.createElement(j.a,{path:"/recipe/:id",component:A}),r.a.createElement(j.a,{path:"/edit/:id",component:N})):r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null))))},U=(a(56),function(){return r.a.createElement("div",{className:"container"},r.a.createElement(v,null,r.a.createElement(R,null)))});u.a.render(r.a.createElement(U,null),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.c3dfffd1.chunk.js.map